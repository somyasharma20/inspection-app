<section class="content">
  <div class="content-block">
    @for (breadscrum of breadscrums; track breadscrum) {
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="breadscrum.title" [items]="breadscrum.items" [active_item]="breadscrum.active">
      </app-breadcrumb>
    </div>
    }
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
          <div class="materialTableHeader">
            <div class="left">
              <ul class="header-buttons-left ms-0">
                <li class="tbl-title">
                  <h2>Reports</h2>
                </li>
                <li class="tbl-search-box">
                  <label for="search-input"><i class="material-icons search-icon">search</i></label>
                  <input placeholder="Search" type="text" (keyup)="applyFilter($event)" #filter
                    class="browser-default search-field" aria-label="Search box">
                </li>
              </ul>
            </div>
            <div class="right">
              <!-- <ul class="tbl-export-btn">
                  <li class="tbl-header-btn">
                    <div class="m-l-10" matTooltip="ADD">
                      <button mat-mini-fab color="primary" (click)="addNew()">
                        <mat-icon class="col-white">add</mat-icon>
                      </button>
                    </div>
                  </li>
                  <li class="tbl-header-btn">
                    <div class="m-l-10" matTooltip="REFRESH">
                      <button mat-mini-fab color="primary" (click)="refresh()">
                        <mat-icon class="col-white">refresh</mat-icon>
                      </button>
                    </div>
                  </li> -->
              <!--<li class="tbl-header-btn">
                    <div class="m-l-10" [hidden]=!selection.hasValue() matTooltip="DELETE">
                      <button mat-mini-fab color="warn" (click)="removeSelectedRows()">
                        <mat-icon class="col-white">delete
                        </mat-icon>
                      </button>
                    </div>
                  </li>
                  <li>
                    <div class="export-button m-l-10" matTooltip="XLSX">
                      <img src="assets/images/icons/xlsx.png" alt="" (click)="exportExcel()" />
                    </div>
                  </li>-->
              <!-- </ul> -->
            </div>
          </div>
          <div class="body overflow-auto">
            <div>
              <form class="register-form m-4" [formGroup]="reportForm" (ngSubmit)="(submit)">
                <div class="row">
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field class="example-full-width mb-3" appearance="outline">
                      <mat-label>Request No</mat-label>
                      <input matInput formControlName="jobNo" />
                      <!-- @if (reportForm.get('jobNo')?.hasError('required')) {
                      <mat-error> Required </mat-error>
                      } -->
                    </mat-form-field>
                  </div>
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field class="example-full-width mb-3" appearance="outline">
                      <mat-label>Select Center</mat-label>
                      <mat-select formControlName="branchID">
                        <mat-option [value]="0">{{ "All" }}</mat-option>
                        @for (branch of lstBranch; track branch) {
                        <mat-option [value]="branch?.branchID">{{
                          branch?.name
                          }}</mat-option>
                        }
                      </mat-select>

                      <!-- @if (reportForm.get('departmentID')?.hasError('required'))
                      {
                      <mat-error> Required </mat-error>
                      } -->
                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field class="example-full-width mb-3" appearance="outline">
                      <mat-label>Location</mat-label>
                      <mat-select formControlName="departmentID">
                        <mat-option [value]="0">{{ "All" }}</mat-option>
                        @for (department of lstDepartment; track department) {
                        <mat-option [value]="department?.departmentID">{{
                          department?.name
                          }}</mat-option>
                        }
                      </mat-select>

                      <!-- @if (reportForm.get('departmentID')?.hasError('required'))
                      {
                      <mat-error> Required </mat-error>
                      } -->
                    </mat-form-field>
                  </div>
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field class="example-full-width mb-3" appearance="outline">
                      <mat-label>Result</mat-label>
                      <mat-select formControlName="Result">
                        <mat-option [value]="0">{{ "All" }}</mat-option>
                        <mat-option [value]="1">
                          Pass
                        </mat-option>
                        <mat-option [value]="2">
                          Fail
                        </mat-option>
                      </mat-select>

                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <!-- <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field
                      class="example-full-width mb-3"
                      appearance="outline"
                    >
                      <mat-label>Select Inspection</mat-label>
                      <mat-select formControlName="inspectionID">
                        <mat-option [value]="0">{{ "All" }}</mat-option>
                        @for (inspection of lstInspection; track inspection) {
                        <mat-option [value]="inspection.inspectionID">{{
                          inspection.name
                        }}</mat-option>
                        }
                      </mat-select>
                     
                    </mat-form-field>
                  </div> -->
                  <!-- <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field
                      class="example-full-width mb-3"
                      appearance="outline"
                    >
                      <mat-label>Select Style</mat-label>
                      <mat-select formControlName="styleID">
                        <mat-option [value]="0">{{ "All" }}</mat-option>
                        @for (style of lstStyle; track style) {
                        <mat-option [value]="style.styleID">{{
                          style.code
                        }}</mat-option>
                        }
                      </mat-select>
                     
                    </mat-form-field>
                  </div> -->
                </div>

                <div class="row">
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field class="example-full-width mb-3" appearance="outline">
                      <mat-label>Start Date </mat-label>
                      <input matInput formControlName="startDate" [matDatepicker]="pickerStartDate" />

                      <mat-datepicker-toggle matSuffix [for]="pickerStartDate"></mat-datepicker-toggle>
                      <mat-datepicker #pickerStartDate></mat-datepicker>
                      <!-- @if (jobForm.get('startDate')?.hasError('required')) {
            <mat-error>Required </mat-error>
            } -->
                    </mat-form-field>
                  </div>
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field class="example-full-width mb-3" appearance="outline">
                      <mat-label>End Date </mat-label>
                      <input matInput formControlName="endDate" [matDatepicker]="pickerEndDate" />

                      <mat-datepicker-toggle matSuffix [for]="pickerEndDate"></mat-datepicker-toggle>
                      <mat-datepicker #pickerEndDate></mat-datepicker>
                      <!-- @if (jobForm.get('startDate')?.hasError('required')) {
            <mat-error>Required </mat-error>
            } -->
                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field class="example-full-width mb-3" appearance="outline">
                      <mat-label>Select Auditor</mat-label>
                      <mat-select formControlName="createdBy">
                        <mat-option [value]="0">{{ "All" }}</mat-option>
                        @for (user of lstUser; track user) {
                        <mat-option [value]="user.userID">{{
                          user.firstName + "" + user.lastName
                          }}</mat-option>
                        }
                      </mat-select>
                      <!-- @if (reportForm.get('createdBy')?.hasError('required')) {
          <mat-error>
            Required
          </mat-error>
          } -->
                    </mat-form-field>
                  </div>
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
                    <mat-form-field class="example-full-width mb-3" appearance="outline">
                      <mat-label>Result</mat-label>
                      <mat-select formControlName="Result">
                        <mat-option [value]="0">{{ "All" }}</mat-option>
                        <mat-option [value]="1">
                          Pass
                        </mat-option>
                        <mat-option [value]="2">
                          Fail
                        </mat-option>
                      </mat-select>

                    </mat-form-field>
                  </div>
                </div>
                <div class="row">
                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                    <div class="example-button-row">
                      <button mat-raised-button color="primary" [disabled]="!reportForm.valid"
                        (click)="SearchJobInspection()">
                        Search
                      </button>

                      <button mat-raised-button color="warn" (click)="ResetJobInspection()" tabindex="-1">
                        Reset
                      </button>
                    </div>
                  </div>
                </div>
              </form>
            </div>

            <div class="responsive_table">
              <table mat-table [dataSource]="dataSourceItem" class="mat-elevation-z8" matSort>
                <!-- jonNo Column -->
                <ng-container matColumnDef="requestNo">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Request No</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.requestNo }}
                  </td>
                </ng-container>
                <!-- branch Column -->
                <ng-container matColumnDef="branchName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Center</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.branchName }}
                  </td>
                </ng-container>
                <!-- Department Column -->
                <ng-container matColumnDef="departmentName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Location</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.departmentName }}
                  </td>
                </ng-container>
                <!-- Section Column -->
                <!-- <ng-container matColumnDef="sectionName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Section</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.sectionName }}
                  </td>
                </ng-container> -->
                <!-- Inspection Column -->
                <!-- <ng-container matColumnDef="inspectionName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Inspection</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.inspectionName }}
                  </td>
                </ng-container> -->
                <!-- style Column -->
                <!-- <ng-container matColumnDef="styleCode">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header >Style</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.styleCode }}
                  </td>
                </ng-container> -->

                <!-- auditor Column -->
                <ng-container matColumnDef="auditor">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Auditor</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.auditor }}
                  </td>
                </ng-container>

                <!-- createdDate Column -->
                <ng-container matColumnDef="createdDate">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Request Date</th>
                  <td mat-cell *matCellDef="let element">
                    {{ element.createdDate | date : "MM-dd-yyyy HH:mm" }}
                  </td>
                </ng-container>

                <!-- actions -->
                <ng-container matColumnDef="actions">
                  <!--<mat-header-cell class="pr-0" *matHeaderCellDef>Actions
                    </mat-header-cell>-->
                  <th mat-header-cell *matHeaderCellDef>Photos</th>
                  <td mat-cell *matCellDef="let row; let i = index" class="pr-0">
                    <button mat-icon-button (click)="ShowImage(row)" class="tbl-action-btn"
                      matTooltip="VIEW SUPPORTING IMAGE">
                      <app-feather-icons [icon]="'image'" [class]="'tbl-fav-image'"></app-feather-icons>
                    </button>
                    <!-- <button
                      mat-icon-button
                      (click)="ShowReport(row)"
                      class="tbl-action-btn"
                      matTooltip="VIEW REPORT"
                    >
                      <app-feather-icons
                        [icon]="'printer'"
                        [class]="'tbl-fav-printer'"
                      ></app-feather-icons>
                    </button> -->
                    <!-- <button mat-icon-button (click)="$event.stopPropagation()" class="tbl-action-btn">
                        <app-feather-icons [icon]="'trash-2'" [class]="'tbl-fav-delete'"></app-feather-icons>
                      </button> -->
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
              </table>

              <div *ngIf="dataSourceItem.filteredData.length === 0">
                No records found
              </div>
              <mat-paginator [pageSize]="10" [pageSizeOptions]="[10, 20, 30, 50, 100]" showFirstLastButtons>
              </mat-paginator>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>